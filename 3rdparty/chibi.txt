library libsdl2

	# SDL_config is overridden for macos. the header path _must_ come before SDL itself
	with_platform macos header_path libsdl2-support/macos expose

	header_path libsdl2/include expose

	scan_files c path libsdl2/src
	scan_files c path libsdl2/src/atomic group atomic
	scan_files c path libsdl2/src/audio group audio
	scan_files c path libsdl2/src/audio/dummy group audio/dummy
	scan_files c path libsdl2/src/cpuinfo group cpuinfo
	scan_files c path libsdl2/src/dynapi group dynapi
	scan_files c path libsdl2/src/events group events
	scan_files c path libsdl2/src/file group file
	scan_files c path libsdl2/src/haptic group haptic
	scan_files c path libsdl2/src/joystick group joystick
	scan_files c path libsdl2/src/libm group libm
	scan_files c path libsdl2/src/power group power
	scan_files c path libsdl2/src/render traverse group render
	scan_files c path libsdl2/src/sensor group sensor
	scan_files c path libsdl2/src/stdlib group stdlib
	scan_files c path libsdl2/src/thread group thread
	scan_files c path libsdl2/src/thread/pthread group thread/pthread
	scan_files c path libsdl2/src/timer group timer
	scan_files c path libsdl2/src/video group video
	scan_files c path libsdl2/src/video/dummy group video/dummy
	scan_files c path libsdl2/src/video/yuv2rgb group video/yuv2rgb

	with_platform macos scan_files m path libsdl2/src/audio/coreaudio
	with_platform macos scan_files m path libsdl2/src/file/cocoa
	with_platform macos scan_files m path libsdl2/src/filesystem/cocoa
	with_platform macos scan_files c path libsdl2/src/haptic/darwin
	with_platform macos scan_files c path libsdl2/src/joystick/darwin
	with_platform macos scan_files c path libsdl2/src/loadso/dlopen
	with_platform macos scan_files c path libsdl2/src/power/macosx
	with_platform macos scan_files m path libsdl2/src/sensor/coremotion group sensor/coremotion
	with_platform macos scan_files c path libsdl2/src/timer/unix
	with_platform macos scan_files m path libsdl2/src/video/cocoa
	with_platform macos depend_library AudioToolbox find
	with_platform macos depend_library Carbon find
	with_platform macos depend_library Cocoa find
	with_platform macos depend_library CoreAudio find
	with_platform macos depend_library CoreFoundation find
	with_platform macos depend_library CoreVideo find
	with_platform macos depend_library ForceFeedback find
	with_platform macos depend_library IOKit find
	with_platform macos depend_library iconv find
	with_platform macos depend_library bz2 find
	with_platform macos depend_library OpenGL find
	# weak : QuartzCore
	# weak : Metal

app libsdl2-test-basic
	add_files libsdl2-support/test-basic.cpp
	depend_library libsdl2

library audiostream

	depend_library libgg

	add_files audiostream/AudioMixer.cpp
	add_files audiostream/AudioMixer.h

	add_files audiostream/AudioStream.h

	header_path . expose

library audiostream-vorbis
	
	depend_library audiostream
	depend_library oggvorbis

	add_files audiostream/AudioStreamVorbis.cpp
	add_files audiostream/AudioStreamVorbis.h

	header_path . expose

library audioio

# todo : add WAVE audio stream library and depend on it here

	depend_library audiostream
	depend_library audiostream-vorbis

# todo : move AudioIO file to its own directory

	add_files audiostream/AudioIO.cpp
	add_files audiostream/AudioIO.h

	header_path . expose

library framework

	depend_library libgg
	depend_library libfbx

	with_platform macos depend_library libsdl2
	with_platform iphoneos depend_library libsdl2
	#with_platform linux depend_library libsdl2
	with_platform windows depend_library libsdl2

	depend_library audioio
	depend_library audiostream
	depend_library audiostream-vorbis
	depend_library glew
	depend_library msdfgen
	depend_library portaudio
	with_platform macos depend_library remotery
	with_platform linux depend_library remotery
	with_platform windows depend_library remotery
	depend_library tinyxml2
	depend_library tinyxml2-helpers
	depend_library utf8rewind

	license_file ../license/framework/COPYING.txt
	license_file ../license/freeimage/freeimage-license.txt
	# todo : license_file ../license/freetype
	license_file ../license/glew/COPYING.txt
	# todo : license_file ../license/openal
	license_file ../license/msdfgen/LICENSE.txt
	# todo : license_file ../license/remotery/
	license_file ../license/tinyxml2/LICENSE.txt
	license_file ../license/utf8rewind/LICENSE
	# todo : license_file ../license/xinput

	scan_files cpp
	scan_files h
	
	scan_files cpp path audiooutput group audiooutput
	scan_files h   path audiooutput group audiooutput

# todo : simplify ?
	with_platform macos   scan_files cpp path gx-opengl group gx-opengl
	with_platform macos   scan_files h   path gx-opengl group gx-opengl
	with_platform linux   scan_files cpp path gx-opengl group gx-opengl
	with_platform linux   scan_files h   path gx-opengl group gx-opengl
	with_platform windows scan_files cpp path gx-opengl group gx-opengl
	with_platform windows scan_files h   path gx-opengl group gx-opengl

	with_platform macos scan_files cpp path gx-metal group gx-metal
	with_platform macos scan_files h   path gx-metal group gx-metal
	with_platform macos scan_files mm  path gx-metal group gx-metal

	with_platform iphoneos scan_files cpp path gx-opengl group gx-opengl
	with_platform iphoneos scan_files h   path gx-opengl group gx-opengl
	#with_platform iphoneos scan_files cpp path gx-metal group gx-metal
	#with_platform iphoneos scan_files h   path gx-metal group gx-metal
	#with_platform iphoneos scan_files mm  path gx-metal group gx-metal

	header_path . expose
	
	compile_definition NO_SDL_GLEXT            * expose
	compile_definition FRAMEWORK_USE_OPENAL    0 expose
	compile_definition FRAMEWORK_USE_PORTAUDIO 1 expose

	compile_definition HAVE_M_PI               * expose toolchain msvc
	compile_definition _USE_MATH_DEFINES       * expose toolchain msvc
	compile_definition _CRT_SECURE_NO_WARNINGS * expose toolchain msvc

# Not every feature works on Raspberry Pi or is just too slow, so we tweak some settings here
	with_platform linux.raspberry-pi compile_definition USE_LEGACY_OPENGL    1 expose
	with_platform linux.raspberry-pi compile_definition ENABLE_HQ_PRIMITIVES 0 expose
	with_platform linux.raspberry-pi compile_definition ENABLE_MSDF_FONTS    0 expose

# todo : disable these Linux options
# For testing with Travis-CI, these are enabled for now. Once everything compiles, the follow up step is to make things compile on Linux with below compile definitions removed
	with_platform linux compile_definition USE_LEGACY_OPENGL    1 expose
	with_platform linux compile_definition ENABLE_HQ_PRIMITIVES 0 expose
	with_platform linux compile_definition ENABLE_MSDF_FONTS    0 expose

# Macos header file includes and libraries
# note : freetype was configured using : ./configure --disable-static --without-zlib --without-png --without-bzip2
# note : freetype dylib was updated using : install_name_tool -id "@rpath/libfreetype.6.dylib" libfreetype.6.dylib
	with_platform macos header_path macos/include          expose
	with_platform macos header_path macos/include/freetype
	with_platform macos depend_library macos/lib/libfreeimage.a local
	with_platform macos depend_library macos/lib/libfreetype.6.dylib local embed_framework
	with_platform macos depend_library Metal find
	with_platform macos depend_library QuartzCore find

	with_platform iphoneos depend_library Metal find
	with_platform iphoneos depend_library QuartzCore find

# Windows header file includes and libraries
	with_platform windows header_path win32/include          expose
	with_platform windows header_path win32/include/freetype
	with_platform windows depend_library win32/lib/FreeImage.lib local
	with_platform windows depend_library win32/lib/freetype.lib local
	with_platform windows depend_library win32/lib/OpenAL32.lib local
	with_platform windows depend_library win32/lib/XInput9_1_0.lib local
	with_platform windows depend_library Winmm.lib global
	with_platform windows depend_library OpenGL32.lib global
	with_platform windows add_dist_files win32/dll/FreeImage.dll
	with_platform windows add_dist_files win32/dll/freetype.dll
	with_platform windows add_dist_files win32/dll/OpenAL32.dll
	with_platform windows add_dist_files win32/dll/XInput9_1_0.dll

# Linux header file includes and libraries

	with_platform linux depend_package OpenGL
	with_platform linux depend_library pthread find
	with_platform linux depend_package GLEW
	with_platform linux depend_library portaudio find
	with_platform linux depend_package Freetype
	with_platform linux depend_library freeimage find
	with_platform linux depend_package SDL2

app framework-example-aniplay
	add_files examples/aniplay.cpp
	resource_path examples/data
	depend_library framework
	group framework-examples

app framework-example-basic
	add_files examples/example.cpp
	resource_path examples/data
	depend_library framework
	group framework-examples

app framework-example-model-basic
	add_files examples/model-basic.cpp
	resource_path examples/data
	depend_library framework
	group framework-examples

app framework-example-model-advanced
	add_files examples/model.cpp
	resource_path examples/data
	depend_library framework
	group framework-examples

app framework-example-sounds
	add_files examples/sounds.cpp
	resource_path examples/data
	depend_library framework
	group framework-examples

app framework-example-spriter
	add_files examples/spriter.cpp
	resource_path examples/data
	depend_library framework
	group framework-examples

app framework-example-sprites
	add_files examples/sprites.cpp
	resource_path examples/data
	depend_library framework
	group framework-examples

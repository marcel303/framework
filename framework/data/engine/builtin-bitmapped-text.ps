include engine/ShaderPS.txt
include engine/ShaderUtil.txt

uniform vec4 params;
uniform sampler2D source;

shader_in vec4 v_color;
shader_in vec2 v_texcoord;

void main()
{
    vec4 color1 = v_color;
    vec4 color2 = vec4(vec3(1.0), texture(source, v_texcoord).x);

    vec4 result = applyColorMode(color1, color2, params.y);

    result = applyColorPost(result, params.z);

    shader_fragColor = result;
}

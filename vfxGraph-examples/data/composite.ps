include engine/ShaderPS.txt

shader_in vec2 texcoord;

uniform sampler2D source;
uniform float opacity;

void main()
{	
	vec4 color = texture(source, texcoord);

	// the correct way to blend:
	//color = vec4(color.rgb, color.a) * opacity;

	// not correct, but the nice looking way to blend:
	color = vec4(color.rgb, color.a * (1.4 - color.a)) * opacity;

    shader_fragColor = color;
}
